{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);const i=Intl.DateTimeFormat(\"fr\");function o(e){const t=function e(t,n){return t.length<=n?[t]:[t.slice(0,n),...e(t.slice(n),n)]}(e,3);let n=\"\";t.forEach(e=>{n+='<div class=\"columns\">',e.forEach(e=>{n+=`\\n              <div class=\"column\">\\n              <div class=\"card\">\\n                <div class=\"card-image\">\\n                  <figure class=\"image is-4by3\">\\n                    <img\\n                      src=\"https://bulma.io/images/placeholders/1280x960.png\"\\n                      alt=\"Placeholder image\"\\n                    />\\n                  </figure>\\n                </div>\\n                <div class=\"card-content\">\\n                  <div class=\"media\">\\n                    <div class=\"media-left\">\\n                      <figure class=\"image is-48x48\">\\n                        <img\\n                          src=\"https://bulma.io/images/placeholders/96x96.png\"\\n                          alt=\"Placeholder image\"\\n                        />\\n                      </figure>\\n                    </div>\\n                    <div class=\"media-content\">\\n                      <p class=\"title is-4\">${e.name}</p>\\n                      \\n                      <p class=\"subtitle is-6\">@johnsmith</p>\\n                    </div>\\n                  </div>\\n    \\n                  <div class=\"content\">\\n                     ${e.description}\\n                    <br />\\n                    Dernière mise à jour: <time datetime=\"${e.updated_at}\">${i.format(new Date(e.updated_at))}</time>\\n                    <button class=\"button\" data-repo-id=\"${e.id}\">\\n                      Favori\\n                    </button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>`}),n+=\"</div>\"}),document.querySelector(\".container\").innerHTML=n,function(){let e;e=navigator.onLine?fetch(\"http://localhost:3000/favorites\").then(e=>e.json()).then(e=>localforage.setItem(\"favorites\",e)):localforage.getItem(\"favorites\"),e.then(e=>{(e||[]).forEach(e=>{document.querySelector(\"[data-repo-id='\"+e+\"']\").classList.add(\"is-warning\")})})}(),function(){const e=document.querySelectorAll(\"[data-repo-id]\");Array.from(e).forEach(e=>{e.addEventListener(\"click\",(function(e){localforage.getItem(\"favorites\").then(t=>{const n=t||[],i=e.target.dataset.repoId;let o;return o=e.target.classList.contains(\"is-warning\")?n.filter(e=>e!==i):Array.from(new Set([...n,i])),navigator.onLine?fetch(\"http://localhost:3000/favorites\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(o)}):localforage.setItem(\"favorites\",o).then(()=>{navigator.permissions.query({name:\"background-sync\"}).then(({state:e})=>{if(console.log(e),\"granted\"===e)return navigator.serviceWorker.ready.then(e=>e.sync.register(\"syncFavorites\"))})})}).then(()=>{e.target.classList.toggle(\"is-warning\")})}))})}()}document.addEventListener(\"DOMContentLoaded\",(function(){let e;navigator.onLine&&document.querySelector(\".notification\").setAttribute(\"hidden\",\"\"),window.addEventListener(\"online\",()=>{document.querySelector(\".notification\").setAttribute(\"hidden\",\"\")}),window.addEventListener(\"offline\",()=>{document.querySelector(\".notification\").removeAttribute(\"hidden\")}),e=navigator.onLine?fetch(\"https://api.github.com/users/EmmanuelDemey/repos\").then(e=>e.json()).then(e=>localforage.setItem(\"data\",e)):localforage.getItem(\"data\"),e.then(e=>o(e))}))}]);","extractedComments":[]}